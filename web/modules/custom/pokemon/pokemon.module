<?php
/**
 * @file
 * Primary module hooks for pokemon module.
 */

use Drupal\advancedqueue\Entity\Queue;
use Drupal\advancedqueue\Job;

/**
 * The callback for the cron job.
 */
function pokemon_ability_tax_callback() {
  /** @var \Drupal\pokemon\PokemonManager $pokemon_manager */
  $pokemon_manager = \Drupal::service('pokemon.pokemon_manager');
  $list = $pokemon_manager->getResourceList('ability');

  $queue = Queue::load('import_ability');
  foreach ($list['results'] as $key => $value) {
    $job = Job::create('pokemon_ability_import_job', ['ability_name' => $value['name']]);
    $queue->enqueueJob($job);
  }
}
